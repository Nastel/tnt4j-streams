<?xml version="1.0" encoding="utf-8"?>
<tnt-data-source
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/Nastel/tnt4j-streams/master/config/tnt-data-source.xsd">

    <!--<parser name="AttributesParser" class="com.jkoolcloud.tnt4j.streams.parsers.ActivityNameValueParser">-->
    <!--<property name="EntryPattern" value=""/>-->

    <!--<field name="${FieldNameLoc}_attr" locator="/entry/*[2]/text()" locator-type="Label" split="true">-->
    <!--<field-locator id="FieldNameLoc" locator="/entry/*[1]/text()" locator-type="Label"/>-->
    <!--</field>-->
    <!--</parser>-->

    <parser name="RAIDMetricsParser" class="com.jkoolcloud.tnt4j.streams.parsers.ActivityJsonParser">
        <property name="ActivityDelim" value="EOF"/>

        <!--<field name="EventType" value="EVENT"/>-->

        <field name="StartTime" locator="$.unixtime" locator-type="Label" datatype="Timestamp" units="Seconds"/>
        <field name="syn_raidLdev_randomReadIOPS" locator="$.syn_raidLdev_randomReadIOPS" locator-type="Label" datatype="Number"/>
        <field name="unixtime" locator="$.unixtime" locator-type="Label" datatype="Timestamp" units="Seconds"/>
        <field name="syn_raidLdev_readTransRate" locator="$.syn_raidLdev_readTransRate" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_seqWriteTransRate" locator="$.syn_raidLdev_seqWriteTransRate" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_readMiss" locator="$.syn_raidLdev_readMiss" locator-type="Label" datatype="Number"/>
        <field name="syn_raidMP_utilization" locator="$.syn_raidMP_utilization" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_randomWriteTransRate" locator="$.syn_raidLdev_randomWriteTransRate" locator-type="Label"
               datatype="Number"/>
        <field name="syn_raidPort_transferRate" locator="$.syn_raidPort_transferRate" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_totalIOPS" locator="$.syn_raidLdev_totalIOPS" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_writeTransRate" locator="$.syn_raidLdev_writeTransRate" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_writeIOPS" locator="$.syn_raidLdev_writeIOPS" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_readHit" locator="$.syn_raidLdev_readHit" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_writeHit" locator="$.syn_raidLdev_writeHit" locator-type="Label" datatype="Number"/>
        <field name="syn_raidClpr_utilization" locator="$.syn_raidClpr_utilization" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_randomWriteIOPS" locator="$.syn_raidLdev_randomWriteIOPS" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_transferRate" locator="$.syn_raidLdev_transferRate" locator-type="Label" datatype="Number"/>
        <field name="syn_raidPort_totalIOPS" locator="$.syn_raidPort_totalIOPS" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_maxResponseTime" locator="$.syn_raidLdev_maxResponseTime" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_seqReadIOPS" locator="$.syn_raidLdev_seqReadIOPS" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_randomReadTransRate" locator="$.syn_raidLdev_randomReadTransRate" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_seqWriteIOPS" locator="$.syn_raidLdev_seqWriteIOPS" locator-type="Label" datatype="Number"/>
        <field name="date" locator="$.date" locator-type="Label" datatype="DateTime" format="yyyy-MM-dd HH:mm:ss"/>
        <field name="writePending" locator="$.writePending" locator-type="Label" datatype="Number"/>
        <field name="cacheUsage" locator="$.cacheUsage" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_readResponseTime" locator="$.syn_raidLdev_readResponseTime" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_readIOPS" locator="$.syn_raidLdev_readIOPS" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_writeResponseTime" locator="$.syn_raidLdev_writeResponseTime" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_maxWriteResponseTime" locator="$.syn_raidLdev_maxWriteResponseTime" locator-type="Label"
               datatype="Number"/>
        <field name="sideFileUsage" locator="$.sideFileUsage" locator-type="Label" datatype="Number"/>
        <field name="signature" locator="$.signature" locator-type="Label" datatype="String"/>
        <field name="syn_raidLdev_writeMiss" locator="$.syn_raidLdev_writeMiss" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_responseTime" locator="$.syn_raidLdev_responseTime" locator-type="Label" datatype="Number"/>
        <field name="syn_raidLdev_seqReadTransRate" locator="$.syn_raidLdev_seqReadTransRate" locator-type="Label" datatype="Number"/>
    </parser>

    <parser name="StatusDataParser" class="com.jkoolcloud.tnt4j.streams.parsers.ActivityRegExParser">
        <property name="Pattern"><![CDATA[\{(?s)(.[^{}]*)\}]]></property>
        <property name="MatchStrategy" value="FIND"/>
        <property name="ActivityDelim" value="EOF"/>
        <property name="Send" value="false"/>

        <field name="EventType" value="EVENT"/>
        <field name="MetricsData" locator="0" locator-type="Index" transparent="true">
            <parser-ref name="RAIDMetricsParser" aggregation="Merge"/>
        </field>
    </parser>

    <!--<stream name="FileStream" class="com.jkoolcloud.tnt4j.streams.inputs.CharacterStream">-->
    <!--<property name="HaltIfNoParser" value="false"/>-->
    <!--<property name="FileName" value="./tnt4j-streams-core/samples/raid-metrics/Storage.json"/>-->

    <!--<parser-ref name="RAIDMetricsParser"/>-->
    <!--</stream>-->

    <stream name="RAIDFileStream" class="com.jkoolcloud.tnt4j.streams.inputs.FileLineStream">
        <property name="HaltIfNoParser" value="false"/>
        <property name="FileName" value="./tnt4j-streams-core/samples/raid-metrics/Storage.json"/>
        <property name="ActivityDelim" value="}"/>
        <property name="RestoreState" value="false"/>
        <property name="SendStreamStates" value="false"/>

        <parser-ref name="StatusDataParser"/>
    </stream>
</tnt-data-source>